{"version":3,"sources":["wxV2/components/feedbackDialog.js"],"names":["define","Dialog","feedbackService","resultTipDialog","template","data","feedbackTit","feedbackContent","init","this","submitStatus","methods","hideDialog","hide","submitFeedback","param","self","type","content","postFeedback","then","status","$","$el","show","setContent","setTimeout","location","reload","href","url","alert"],"mappings":"AAAA,YAIAA,SACA,oBACA,yBACA,8BACG,SAASC,EAAQC,EAAgBC,GAChC,MAAO,IAAIF,IACPG,SAAU,4BACVC,MACIC,eACAC,gBAAiB,IAErBC,KAAM,WACFC,KAAKC,cAAe,GAExBC,SACIC,WAAY,WACRH,KAAKI,QAETC,eAAgB,WACZ,IAAGL,KAAKC,aAAR,CACAD,KAAKC,cAAe,CACpB,IAAIK,MAAYC,EAAOP,IACvBM,GAAME,KAAOR,KAAKH,YAAYW,KAC9BF,EAAMG,QAAUT,KAAKF,gBACrBL,EAAgBiB,aAAaJ,GAAOK,KAAK,SAASf,GAC9C,OAAQA,EAAKgB,QACT,IAAK,GACDC,EAAEN,EAAKO,KAAKV,OACZV,EAAgBqB,OAChBrB,EAAgBsB,WAAW,QAAQ,GACnCT,EAAKN,cAAe,EACpBgB,WAAW,WACPC,SAASC,UACV,IAEH,MACJ,KAAK,GACDD,SAASE,KAAOxB,EAAKyB,GACrB,MACJ,QACIR,EAAEN,EAAKO,KAAKV,OACZV,EAAgBqB,OAChBrB,EAAgBsB,WAAW,sBAAsB,GACjDC,WAAW,WACPvB,EAAgBU,OAChBG,EAAKQ,OACLF,EAAEN,EAAKO,KAAKC,QACb,IACH,MACJ,SACIO,MAAM","file":"../../../wxV2/components/feedbackDialog.js","sourcesContent":["/**\n * Created by janey on 16/6/20.\n */\n\ndefine([\n'components/dialog',\n'service/accountService',\n'components/resultTipDialog',\n], function(Dialog, feedbackService,resultTipDialog){\n    return new Dialog({\n        template: '#template-feedback-dialog',\n        data: {\n            feedbackTit: {},\n            feedbackContent: ''\n        },\n        init: function(){\n            this.submitStatus = false;\n        },\n        methods: {\n            hideDialog: function(){\n                this.hide();\n            },\n            submitFeedback: function(){\n                if(this.submitStatus) return;\n                this.submitStatus = true;\n                var param = {}, self = this;\n                param.type = this.feedbackTit.type;\n                param.content = this.feedbackContent;\n                feedbackService.postFeedback(param).then(function(data){\n                    switch (data.status){\n                        case 0:\n                            $(self.$el).hide();\n                            resultTipDialog.show();\n                            resultTipDialog.setContent(\"提交成功\", true);\n                            self.submitStatus = false;\n                            setTimeout(function(){\n                                location.reload();\n                            }, 1000);\n\n                            break;\n                        case 1:\n                            location.href = data.url;\n                            break;\n                        case -1:\n                            $(self.$el).hide();\n                            resultTipDialog.show();\n                            resultTipDialog.setContent(\"抱歉,提交失败,请重新提交您的问题!\", false);\n                            setTimeout(function(){\n                                resultTipDialog.hide();\n                                self.show();\n                                $(self.$el).show();\n                            }, 1000);\n                            break;\n                        default:\n                            alert('抱歉，服务器好像出了点小问题~~');\n                    }\n                });\n            }\n        }\n    });\n});"]}