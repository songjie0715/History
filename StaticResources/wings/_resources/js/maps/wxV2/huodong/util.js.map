{"version":3,"sources":["wxV2/huodong/util.js"],"names":["doc","win","docEl","documentElement","resizeEvt","window","recalc","clientWidth","style","fontSize","addEventListener","document","$","on","innerHeight","scrollY","height","loadMore","Dialog","opt","this","el","scrollTop","self","_init","$closed","find","click","hide","e","stopPropagation","shadow","prototype","show","t","type","pos","off","Shadow","windowHeight","DialogHeight","css","top","render","text","html","append","dh"],"mappings":"AAAA,cAMA,SAAWA,EAAKC,GACZ,GAAIC,GAAQF,EAAIG,gBACZC,EAAY,qBAAuBC,QAAS,oBAAsB,SAClEC,EAAS,WACL,GAAIC,GAAcL,EAAMK,WACnBA,KACLL,EAAMM,MAAMC,SAAW,IAAMF,EAAc,KAAO,MAGrDP,GAAIU,mBACTT,EAAIS,iBAAiBN,EAAWE,GAAQ,GACxCN,EAAIU,iBAAiB,mBAAoBJ,GAAQ,KAClDK,SAAUN,QAKbO,EAAEP,QAAQQ,GAAG,SAAU,WAEfR,OAAOS,YAAcT,OAAOU,SAAWH,EAAED,UAAUK,UACnDC,YAOR,IAAIC,QAAS,SAASC,GAClBC,KAAKC,GAAKF,EAAIE,GACdD,KAAKE,UAAYH,EAAIG,SACrB,IAAIC,GAAOH,IACXA,MAAKI,MAAQ,WACT,GAAIC,GAAUb,EAAEW,EAAKF,IAAIK,KAAK,UAC9BD,GAAQE,MAAM,WACVJ,EAAKK,SAEThB,EAAEQ,KAAKC,IAAIM,MAAM,SAASE,GACtBA,EAAEC,sBAKVC,MAEJb,QAAOc,UAAUC,KAAO,SAASC,EAAEC,GAC/Bf,KAAKI,QACLJ,KAAKgB,IAAIF,EACT,IAAIX,GAAOH,IACNW,SAIHA,OAAOE,OACHE,GACAvB,EAAEmB,OAAOV,IAAIgB,IAAI,WALnBN,OAAS,GAAIO,QACbP,OAAOE,QAQXrB,EAAEQ,KAAKC,IAAIY,OAEPE,GACAvB,EAAEmB,OAAOV,IAAIM,MAAM,WACfJ,EAAKK,OACLhB,EAAEmB,OAAOV,IAAIO,UAMzBV,OAAOc,UAAUJ,KAAO,WACpBhB,EAAEQ,KAAKC,IAAIO,OACXG,OAAOH,QAGXV,OAAOc,UAAUI,IAAM,SAASF,GAC5B,GAAIZ,GAAYY,EACZK,EAAe3B,EAAEP,QAAQW,SACzBwB,EAAe5B,EAAEQ,KAAKC,IAAIL,QAE9BJ,GAAEQ,KAAKC,IAAIoB,KACPC,IAAKH,EAAa,EAAIjB,EAAakB,EAAa,KAIxDtB,OAAOc,UAAUW,OAAS,SAASC,GAC/BhC,EAAEQ,KAAKC,IAAIK,KAAK,KAAKmB,KAAKD,GAM9B,IAAIN,QAAS,WACTlB,KAAKC,GAAKT,EAAE,8BACZQ,KAAKI,MAAQ,WACTZ,EAAE,QAAQkC,OAAO1B,KAAKC,KAK9BiB,QAAON,UAAUC,KAAO,WACpBb,KAAKI,QACLJ,KAAKgB,MACLhB,KAAKC,GAAGY,QAGZK,OAAON,UAAUJ,KAAO,WACpBR,KAAKC,GAAGO,QAGZU,OAAON,UAAUI,IAAM,WACnB,GAAIW,GAAKnC,EAAED,UAAUK,QACrBI,MAAKC,GAAGL,OAAO+B","file":"../../../wxV2/huodong/util.js","sourcesContent":["/**\n * Created by janey on 2017/1/10.\n */\n\n// response\n\n(function (doc, win) {\n    var docEl = doc.documentElement,\n        resizeEvt = 'orientationchange' in window ? 'orientationchange' : 'resize',\n        recalc = function () {\n            var clientWidth = docEl.clientWidth;\n            if (!clientWidth) return;\n            docEl.style.fontSize = 20 * (clientWidth / 375) + 'px';\n        };\n\n    if (!doc.addEventListener) return;\n    win.addEventListener(resizeEvt, recalc, false);\n    doc.addEventListener('DOMContentLoaded', recalc, false);\n})(document, window);\n\n\n// lode more\n\n$(window).on('scroll', function(){\n    // 如果滚动条滑到页面底部, 加载更多数据\n    if( window.innerHeight + window.scrollY == $(document).height()){\n        loadMore();\n    }\n});\n\n\n// Dialog\n\nvar Dialog = function(opt){\n    this.el = opt.el;\n    this.scrollTop = opt.scrollTop;\n    var self = this;\n    this._init = function(){\n        var $closed = $(self.el).find('.closed');\n        $closed.click(function(){\n            self.hide();\n        });\n        $(this.el).click(function(e){\n            e.stopPropagation();\n        });\n    }\n};\n\nvar shadow;\n\nDialog.prototype.show = function(t,type){\n    this._init();\n    this.pos(t);\n    var self = this;\n    if( !shadow ){\n        shadow = new Shadow();\n        shadow.show();\n    } else {\n      shadow.show();\n      if( type ){\n          $(shadow.el).off('click');\n      }\n    }\n    // shadow.show();\n    $(this.el).show();\n\n    if(!type){\n        $(shadow.el).click(function(){\n            self.hide();\n            $(shadow.el).hide();\n        })\n    }\n\n};\n\nDialog.prototype.hide = function(){\n    $(this.el).hide();\n    shadow.hide();\n};\n\nDialog.prototype.pos = function(t){\n    var scrollTop = t,\n        windowHeight = $(window).height(),\n        DialogHeight = $(this.el).height();\n\n    $(this.el).css({\n        top: windowHeight/2 + scrollTop - (DialogHeight/2)\n    })\n};\n\nDialog.prototype.render = function(text){\n    $(this.el).find('p').html(text);\n};\n\n\n\n// 遮罩\nvar Shadow = function(){\n    this.el = $('<div class=\"shadow\"></div>');\n    this._init = function(){\n        $('body').append(this.el);\n    }\n\n};\n\nShadow.prototype.show = function(){\n    this._init();\n    this.pos();\n    this.el.show();\n};\n\nShadow.prototype.hide = function(){\n    this.el.hide();\n};\n\nShadow.prototype.pos = function(){\n    var dh = $(document).height();\n    this.el.height(dh);\n};\n\n\n\n\n"]}