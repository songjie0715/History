{"version":3,"sources":["wxV2/controller/chapterBuy.js"],"names":["define","Vue","purchaseDialog","bookDetailService","loading","overlay","resultTipDialog","bookSundryDialog","openMonthDialog","core","chapterId","autoSubscribe","bookId","el","data","isAutoSubChecked","init","attached","methods","showDialog","this","show","checkAutoSub","purchaseCurChapter","num","self","purchaseChapter","then","hide","status","setContent","setTimeout","location","href","wap_DOMAIN","url","lastChapterStaff"],"mappings":"AAAA,YAKAA,SACA,MACA,4BACA,4BACA,qBACA,qBACA,6BACA,8BACA,6BACA,QACE,SAASC,EAAIC,EAAgBC,EAAkBC,EAAQC,EAAQC,EAAgBC,EAAiBC,EAAgBC,GAE9G,MAAO,UAASC,EAAWC,EAAeC,GAEtC,GAAIX,IACAY,GAAI,OACJC,MACIC,iBAAkBJ,IAAiB,GAEvCK,KAAM,aAGNC,SAAS,aAGTC,SACIC,WAAY,WACRjB,EAAeQ,EAAWU,KAAKL,kBAAkBM,QAGrDC,aAAc,WACVF,KAAKL,kBAAoBK,KAAKL,kBAElCQ,mBAAoB,SAASC,EAAId,GAC7B,GAAIe,GAAOL,IACXhB,GAAQiB,OACRlB,EAAkBuB,gBAAgBF,EAAId,EAAWe,EAAKV,kBAAkBY,KAAK,SAASb,GAClFV,EAAQwB,OACRvB,EAAQgB,OACRf,EAAgBe,OAEG,GAAfP,EAAKe,QAELvB,EAAgBwB,WAAW,YAAY,GACvCC,WAAW,WACPC,SAASC,KAAOxB,EAAKyB,WAAapB,EAAKqB,KACzC,IACKrB,EAAKe,aAEZvB,EAAgBwB,WAAW,kBAAkB,GAC7CC,WAAW,WACP1B,EAAQuB,QACV,SAIdQ,iBAAkB,WACd7B,EAAiBc,QAErBb,gBAAiB,SAASI,GACtBJ,EAAgBa","file":"../../../wxV2/controller/chapterBuy.js","sourcesContent":["/**\n * Created by janey on 16/6/7.\n */\n\n\ndefine([\n'vue',\n'components/purchaseDialog',\n'service/bookDetailService',\n'components/loading',\n'components/overlay',\n'components/resultTipDialog',\n'components/bookSundryDialog',\n'components/openMonthDialog',\n'core'\n],function(Vue,purchaseDialog, bookDetailService,loading,overlay,resultTipDialog,bookSundryDialog,openMonthDialog,core){\n\n    return function(chapterId, autoSubscribe, bookId){\n\n        new Vue({\n            el: '#app',\n            data : {\n                isAutoSubChecked: autoSubscribe || false\n            },\n            init: function(){\n\n            },\n            attached:function(){\n\n            },\n            methods: {\n                showDialog: function(){\n                    purchaseDialog(chapterId, this.isAutoSubChecked).show();\n                    // this.isOverlayShow = true;\n                },\n                checkAutoSub: function(){\n                    this.isAutoSubChecked = !this.isAutoSubChecked;\n                },\n                purchaseCurChapter: function(num,chapterId){\n                    var self = this;\n                    loading.show();\n                    bookDetailService.purchaseChapter(num,chapterId, self.isAutoSubChecked).then(function(data){\n                        loading.hide();\n                        overlay.show();\n                        resultTipDialog.show();\n\n                        if( data.status == 1 ){\n\n                            resultTipDialog.setContent(\"恭喜,购买成功!\", true);\n                            setTimeout(function(){\n                                location.href = core.wap_DOMAIN + data.url;\n                            },0);\n                        } else if( data.status == -1 ){\n\n                            resultTipDialog.setContent(\"抱歉,购买失败,请重新购买!\", false);\n                            setTimeout(function(){\n                                overlay.hide();\n                            },2000);\n                        }\n                    })\n                },\n                lastChapterStaff: function(){\n                    bookSundryDialog.show();\n                },\n                openMonthDialog: function(bookId){\n                    openMonthDialog.show();\n                }\n            }\n        });\n    }\n});\n\n"]}