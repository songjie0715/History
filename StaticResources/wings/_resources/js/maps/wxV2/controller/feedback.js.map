{"version":3,"sources":["wxV2/controller/feedback.js"],"names":["define","Vue","feedBackService","feedbackDialog","loadingMoreMixin","core","el","mixins","data","page","user","loadingMore","noMore","created","this","$emit","events","scrollBottom","self","getMoreFeedback","then","_data$result","status","result","_data$result$messageL","messageList","totalCount","items","feedbackList","length","concat","$set","alert","methods","feedback","show"],"mappings":"AAAA,YAKAA,SACI,MACA,yBACA,4BACA,yBACA,QACF,SAASC,EAAIC,EAAiBC,EAAgBC,EAAkBC,GAE9D,MAAO,IAAIJ,IACPK,GAAI,OACJC,QAASH,GACTI,MACIC,KAAM,EACNC,QACAC,aAAa,EACbC,QAAQ,GAEZC,QATW,WAUPC,KAAKC,MAAM,iBAEfC,QACIC,aADI,WAEA,GAAIC,GAAOJ,IAEX,OADAI,GAAKP,aAAc,EACfG,KAAKF,YACLE,KAAKH,aAAc,OAGvBT,GAAgBiB,gBAAgBD,EAAKT,QAAQW,KAAK,SAACZ,GAC/CU,EAAKP,aAAc,CADmC,IAAAU,IAGmBb,EAAnEc,OAAmEd,EAA3De,QAHwCC,EAAAH,EAG9BI,YAAeC,EAHeF,EAGfE,WAAYC,EAHGH,EAGHG,MAAWjB,EAHRW,EAGQX,IAC9DQ,GAAKR,KAAOA,EAEG,GAAfF,EAAKc,OAAcJ,EAAKU,aAAgBV,EAAKU,aAAaC,QAAUH,EAAaR,EAAKN,QAAS,EAAOM,EAAKU,aAAeV,EAAKU,aAAaE,OAAOH,GAAST,EAAKa,KAAK,eAAgBJ,GAASK,MAAM,sBAKjNC,SACIC,SADK,WAED/B,EAAegC","file":"../../../wxV2/controller/feedback.js","sourcesContent":["/**\n * Created by janey on 16/6/7.\n */\n\n\ndefine([\n    'vue',\n    'service/accountService',\n    'components/feedbackDialog',\n    'mixin/loadingMoreMixin',\n    'core'\n],function(Vue,feedBackService, feedbackDialog, loadingMoreMixin, core){\n\n    return new Vue({\n        el: '#app',\n        mixins: [loadingMoreMixin],\n        data : {\n            page: 1,\n            user: {},\n            loadingMore: true,\n            noMore: false\n        },\n        created(){\n            this.$emit('scrollBottom');\n        },\n        events: {\n            scrollBottom (){\n                let self = this;\n                self.loadingMore = true;\n                if( this.noMore){\n                    this.loadingMore = false;\n                    return;\n                }\n                feedBackService.getMoreFeedback(self.page++).then((data)=>{\n                    self.loadingMore = false;\n\n                    let { status, result: { messageList: { totalCount, items,  }, user } } = data;\n                    self.user = user;\n\n                    data.status == 0 ? self.feedbackList ?  self.feedbackList.length >= totalCount ? self.noMore = true : self.feedbackList = self.feedbackList.concat(items) : self.$set('feedbackList', items) : alert('啊哦，服务器可能出现了点问题');\n\n                })\n            }\n        },\n        methods: {\n            feedback(){\n                feedbackDialog.show();\n            }\n        }\n    });\n});\n\n"]}