{"version":3,"sources":["wxV2/controller/iCheck.js"],"names":["checkBtn","t","self","$","checkMod","checkUserId","val","ajax","type","url","dataType","success","data","signResult","signinResult","checkResult","signCount","signAward","Number","signAwawd","signDay","signList","day","theDayAward","award","theDay","eq","tipMod","next","show","find","text","addClass","removeClass","html","off","message","scrollY","window","scrollTop","wh","height","popMod","render","setTimeout","hide","signBool","on","conText","this","$popMod","scrollT","pos","shadow","css","top","$shadow","dh","document"],"mappings":"AAAA,YAYI,SAASA,UAASC,GACd,GAAIC,GAAOC,EAAEF,GACTG,EAAWD,EAAE,YACbE,EAAcF,EAAE,gBAAgBG,KACpCH,GAAEI,MACEC,KAAK,MACLC,IAAI,+BAAiCJ,EACrCK,SAAS,OACTC,QAAQ,SAASC,GACb,GAAIC,GAAaD,EAAKE,aAClBC,EAAcF,EAAWC,aACzBE,EAAYH,EAAWG,UACvBC,EAAYC,OAAOL,EAAWM,WAC9BC,EAAUP,EAAWQ,SAASL,EAAY,GAAGM,IAC7CC,EAAcL,OAAOL,EAAWQ,SAASL,EAAY,GAAGQ,OACxDC,EAAStB,EAAE,kBAAkBuB,GAAGV,EAAY,EAChD,QAAQD,GACJ,IAAK,GACDY,OAAO,aACPzB,EAAK0B,OAAOC,OACZzB,EAAS0B,KAAK,aAAaC,KAAKf,GAChCS,EAAOK,KAAK,SAASE,SAAS,MAC9BP,EAAOK,KAAK,YAAYG,YAAY,UAAUD,SAAS,YAAYF,KAAK,QAAQI,KAAK,QAASX,EAAcN,GAAY,eACxHf,EAAKiC,IAAI,SAASH,SAAS,QAAQD,KAAK,OAE1B,GAAXX,GACCO,OAAO,WAAaV,EAAW,YAWvD,QAASU,QAAOS,GACZ,GAAIC,GAAUlC,EAAEmC,QAAQC,YACpBC,EAAKrC,EAAEmC,QAAQG,QACnBC,QAAOb,KAAKQ,EAAQG,EAAG,EAAE,IACzBE,OAAOC,OAAOP,GACdQ,WAAW,WACPF,OAAOG,QACT,KAtDN,GAAIC,UAAW3C,EAAE,aAAaG,KACf,IAAZwC,UACC3C,EAAE,qBAAqBgC,IAAI,SAASH,SAAS,QAAQD,KAAK,OAG9D5B,EAAE,qBAAqB4C,GAAG,QAAQ,WAC9B,GAAIC,GAAUC,IACdjD,UAASgD,IAkDb,IAAIN,QAAU,WACV,GAAIQ,GAAU/C,EAAE,UAChB,QACI0B,KAAM,SAASsB,GACXF,KAAKG,IAAID,GACTE,OAAOxB,OACPqB,EAAQrB,QAEZgB,KAAM,WACFK,EAAQL,OACRQ,OAAOR,QAEXO,IAAK,SAASD,GACVD,EAAQI,KACJC,IAAOJ,EAAQ,QAGvBR,OAAQ,SAAST,GACbgB,EAAQpB,KAAK,QAAQI,KAAKA,QAKlCmB,OAAU,WACV,GAAIG,GAAUrD,EAAE,aAChB,QACI0B,KAAM,WACFoB,KAAKG,MACLI,EAAQ3B,QAEZgB,KAAM,WACFW,EAAQX,QAEZO,IAAK,WACD,GAAIK,GAAKtD,EAAEuD,UAAUjB,QACrBe,GAAQf,OAAOgB","file":"../../../wxV2/controller/iCheck.js","sourcesContent":["//点击签到\r\n// function checkSign(){\r\n    var signBool = $('.signBool').val();\r\n    if(signBool == 1){\r\n        $('.checkCircle .btn').off('click').addClass('void').text('已签到');\r\n        // return;\r\n    }\r\n    $('.checkCircle .btn').on('click',function(){\r\n        var conText = this;\r\n        checkBtn(conText);\r\n    });\r\n\r\n    function checkBtn(t){\r\n        var self = $(t);\r\n        var checkMod = $('.checkBg');\r\n        var checkUserId = $('.checkUserId').val();\r\n        $.ajax({\r\n            type:'get',\r\n            url:'/wx/user/sign/signin?userId=' + checkUserId,\r\n            dataType:'json',\r\n            success:function(data){\r\n                var signResult = data.signinResult;\r\n                var checkResult = signResult.signinResult; // 签到结果有无连续\r\n                var signCount = signResult.signCount; // 累计签到的数量\r\n                var signAward = Number(signResult.signAwawd); //第五天的额外奖励\r\n                var signDay = signResult.signList[signCount - 1].day; // 累计签到至第几天\r\n                var theDayAward = Number(signResult.signList[signCount - 1].award); //当天获取的阅读券\r\n                var theDay = $('.checkTable li').eq(signCount - 1);\r\n                switch (checkResult){\r\n                    case 1:\r\n                        tipMod('恭喜您，签到成功！');\r\n                        self.next().show();\r\n                        checkMod.find('.checkNum').text(signCount);\r\n                        theDay.find('p.day').addClass('on');\r\n                        theDay.find('p.status').removeClass('status').addClass('statusOn').find('span').html('+<i>'+ (theDayAward + signAward) +'</i><br>阅读券');\r\n                        self.off('click').addClass('void').text('已签到');\r\n\r\n                        if(signDay == 5){\r\n                            tipMod('恭喜您,额外获取' + signAward +'阅读券!');\r\n                        }\r\n                        break;\r\n                    default:;\r\n                }\r\n            }\r\n        });\r\n    }\r\n\r\n\r\n    //dialog\r\n    function tipMod(message){\r\n        var scrollY = $(window).scrollTop();\r\n        var wh = $(window).height();\r\n        popMod.show(scrollY+wh/2-22);\r\n        popMod.render(message);\r\n        setTimeout(function(){\r\n            popMod.hide();\r\n        },2000);\r\n    }\r\n\r\n    var popMod = (function(){\r\n        var $popMod = $('.popMod');\r\n        return {\r\n            show: function(scrollT){\r\n                this.pos(scrollT);\r\n                shadow.show();\r\n                $popMod.show();\r\n            },\r\n            hide: function(){\r\n                $popMod.hide();\r\n                shadow.hide();\r\n            },\r\n            pos: function(scrollT){\r\n                $popMod.css({\r\n                    'top': scrollT+'px'\r\n                })\r\n            },\r\n            render: function(html){\r\n                $popMod.find('span').html(html);\r\n            }\r\n        }\r\n    })();\r\n\r\n    var shadow = (function(){\r\n        var $shadow = $('.shadowMod');\r\n        return {\r\n            show: function(){\r\n                this.pos();\r\n                $shadow.show();\r\n            },\r\n            hide: function(){\r\n                $shadow.hide();\r\n            },\r\n            pos: function(){\r\n                var dh = $(document).height();\r\n                $shadow.height(dh);\r\n            }\r\n        }\r\n    })();\r\n// }\r\n// checkSign();\r\n\r\n   "]}