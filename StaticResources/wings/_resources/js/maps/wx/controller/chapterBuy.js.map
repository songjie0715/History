{"version":3,"sources":["wx/controller/chapterBuy.js"],"names":["define","Vue","purchaseDialog","bookDetailService","loading","overlay","resultTipDialog","core","chapterId","autoSubscribe","el","data","isAutoSubChecked","init","attached","methods","showDialog","this","show","checkAutoSub","purchaseCurChapter","num","self","purchaseChapter","then","hide","status","setContent","setTimeout","location","href","wap_DOMAIN","url"],"mappings":"AAAA,YAKAA,SACA,MACA,4BACA,4BACA,qBACA,qBACA,6BACA,QACE,SAASC,EAAIC,EAAgBC,EAAkBC,EAAQC,EAAQC,EAAgBC,GAE7E,MAAO,UAASC,EAAWC,GAEvB,GAAIR,IACAS,GAAI,OACJC,MACIC,iBAAkBH,IAAiB,GAEvCI,KAAM,aAGNC,SAAS,aAGTC,SACIC,WAAY,WACRd,EAAeM,EAAWS,KAAKL,kBAAkBM,QAGrDC,aAAc,WACVF,KAAKL,kBAAoBK,KAAKL,kBAElCQ,mBAAoB,SAASC,EAAIb,GAC7B,GAAIc,GAAOL,IACXb,GAAQc,OACRf,EAAkBoB,gBAAgBF,EAAIb,EAAWc,EAAKV,kBAAkBY,KAAK,SAASb,GAClFP,EAAQqB,OACRpB,EAAQa,OACRZ,EAAgBY,OAEG,GAAfP,EAAKe,QAELpB,EAAgBqB,WAAW,YAAY,GACvCC,WAAW,WACPC,SAASC,KAAOvB,EAAKwB,WAAapB,EAAKqB,KACzC,IACKrB,EAAKe,aAEZpB,EAAgBqB,WAAW,kBAAkB,GAC7CC,WAAW,WACPvB,EAAQoB,QACV","file":"../../../wx/controller/chapterBuy.js","sourcesContent":["/**\n * Created by janey on 16/6/7.\n */\n\n\ndefine([\n'vue',\n'components/purchaseDialog',\n'service/bookDetailService',\n'components/loading',\n'components/overlay',\n'components/resultTipDialog',\n'core'\n],function(Vue,purchaseDialog, bookDetailService,loading,overlay,resultTipDialog,core){\n\n    return function(chapterId, autoSubscribe){\n\n        new Vue({\n            el: '#app',\n            data : {\n                isAutoSubChecked: autoSubscribe || false\n            },\n            init: function(){\n\n            },\n            attached:function(){\n\n            },\n            methods: {\n                showDialog: function(){\n                    purchaseDialog(chapterId, this.isAutoSubChecked).show();\n                    // this.isOverlayShow = true;\n                },\n                checkAutoSub: function(){\n                    this.isAutoSubChecked = !this.isAutoSubChecked;\n                },\n                purchaseCurChapter: function(num,chapterId){\n                    var self = this;\n                    loading.show();\n                    bookDetailService.purchaseChapter(num,chapterId, self.isAutoSubChecked).then(function(data){\n                        loading.hide();\n                        overlay.show();\n                        resultTipDialog.show();\n\n                        if( data.status == 1 ){\n\n                            resultTipDialog.setContent(\"恭喜,购买成功!\", true);\n                            setTimeout(function(){\n                                location.href = core.wap_DOMAIN + data.url;\n                            },0);\n                        } else if( data.status == -1 ){\n\n                            resultTipDialog.setContent(\"抱歉,购买失败,请重新购买!\", false);\n                            setTimeout(function(){\n                                overlay.hide();\n                            },2000);\n                        }\n                    })\n                }\n            }\n        });\n    }\n});\n\n"]}