{"version":3,"sources":["wx/controller/bookBuylogs.js"],"names":["define","Vue","bookShelfService","loadingMoreMixin","el","mixins","data","isLoading","hasNoMore","isAjaxLogs","ajaxLogItems","noLoading","flag","events","scrollBottom","self","this","getBuyLogs","pageNum","then","status","concat","result","moneys","items","location","href","url","alert","haveNextPage","init","attached","methods"],"mappings":"AAAA,YAKAA,SACA,MACA,2BACA,0BACE,SAASC,EAAIC,EAAkBC,GAE7B,MAAO,IAAIF,IACPG,GAAI,OACJC,QAASF,GACTG,MACIC,WAAW,EACXC,WAAW,EACXC,YAAY,EACZC,gBACAC,WAAW,EACXC,MAAM,GAEVC,QACIC,aAAe,WACX,GAAIC,GAAOC,IACX,OAAGA,MAAKL,eACJK,KAAKR,WAAY,IAGrBQ,KAAKT,WAAY,OACdS,KAAKJ,OACRI,KAAKJ,MAAO,EAEZV,EAAiBe,aAAaF,EAAKG,SAASC,KAAK,SAASb,GAEtD,OAAQA,EAAKc,QACT,IAAK,GACDL,EAAKN,YAAa,EAClBM,EAAKR,WAAY,EACjBQ,EAAKH,MAAO,EACZG,EAAKL,aAAeK,EAAKL,aAAaW,OAAOf,EAAKgB,OAAOC,OAAOC,MACpE,MACA,KAAK,GAED,YADAC,SAASC,KAAOpB,EAAKqB,IAGzB,QACIZ,EAAKR,WAAY,EACjBQ,EAAKP,WAAY,EACjBO,EAAKH,MAAO,CAChB,MACA,SACIgB,MAAM,WAGTtB,EAAKgB,OAAOC,OAAOM,eACpBd,EAAKJ,WAAY,UAKjCmB,KAAM,WACFd,KAAKE,QAAU,GAEnBa,SAAS,aAGTC","file":"../../../wx/controller/bookBuylogs.js","sourcesContent":["/**\n * Created by janey on 16/6/7.\n */\n\n\ndefine([\n'vue',\n'service/bookShelfService',\n'mixin/loadingMoreMixin'\n],function(Vue,bookShelfService, loadingMoreMixin){\n\n    return new Vue({\n        el: '#app',\n        mixins: [loadingMoreMixin],\n        data : {\n            isLoading: false,\n            hasNoMore: false,\n            isAjaxLogs: false,\n            ajaxLogItems: [],\n            noLoading: false,\n            flag: false\n        },\n        events: {\n            scrollBottom : function(){\n                var self = this;\n                if(this.noLoading){\n                    this.hasNoMore = true;\n                    return;\n                }\n                this.isLoading = true;\n                if(this.flag) return;\n                this.flag = true;\n\n                bookShelfService.getBuyLogs(++self.pageNum).then(function(data){\n\n                    switch (data.status){\n                        case 0:\n                            self.isAjaxLogs = true;\n                            self.isLoading = false;\n                            self.flag = false;\n                            self.ajaxLogItems = self.ajaxLogItems.concat(data.result.moneys.items);\n                        break;\n                        case 1:\n                            location.href = data.url;\n                            return;\n                        break;\n                        case -1:\n                            self.isLoading = false;\n                            self.hasNoMore = true;\n                            self.flag = false;\n                        break;\n                        default:\n                            alert('啊哦,出错了哦');\n                    }\n\n                    if( !data.result.moneys.haveNextPage ){\n                        self.noLoading = true;\n                    }\n                });\n            }\n        },\n        init: function(){\n            this.pageNum = 1;\n        },\n        attached:function(){\n\n        },\n        methods: {\n\n        }\n    });\n});\n\n"]}