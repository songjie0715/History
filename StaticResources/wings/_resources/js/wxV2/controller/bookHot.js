"use strict";define(["vue","service/accountService","mixin/loadingMoreMixin","core"],function(e,s,t,o){return function(o){new e({el:"#app",mixins:[t],data:{sex:o.sex,female:{noMore:!1,BookList:[],page:1,haveNextPage:!0,loading:!0},male:{noMore:!1,BookList:[],page:1,haveNextPage:!0,loading:!0}},created:function(){var e=this;return null!=history.state&&(this.sex=history.state.sex,o.sex=this.sex,sessionStorage.getItem(o.sex)&&null!=JSON.parse(sessionStorage.getItem(o.sex)).BookList)?(e[o.sex].page=history.state.page,e[o.sex].BookList=JSON.parse(sessionStorage.getItem(o.sex)).BookList,e[o.sex].noMore=history.state.noMore,e[o.sex].haveNextPage=history.state.haveNextPage,$("html,body").animate({scrollTop:history.state.scrollY},50),void(0!=this[this.sex].BookList.length&&(this[this.sex].loading=!this[this.sex].loading))):(o.page=this[this.sex].page,void s.getHotBooks(o).then(function(s){var t=s.result.list;switch(0==t.length&&(e[o.sex].noMore=!0),s.status){case-1:alert("不好意思，服务器开小差了，请重新刷新页面");break;case 0:e[o.sex].BookList=e[o.sex].BookList.concat(t),"female"==o.sex?sessionStorage.setItem("female",JSON.stringify({BookList:e[o.sex].BookList})):sessionStorage.setItem("male",JSON.stringify({BookList:e[o.sex].BookList})),e[e.sex].loading=!e[e.sex].loading,s.result.currentPage>=s.result.totalPage?e[o.sex].haveNextPage=!1:e[o.sex].haveNextPage=!0}}))},events:{getChangeSexBooks:function(){var e=this;this[this.sex].haveNextPage&&this[this.sex].haveNextPage&&(o.sex=this.sex,o.page=this[this.sex].page,s.getHotBooks(o).then(function(s){var t=s.result.list;switch(0==t.length&&(e[o.sex].noMore=!0,e[e.sex].loading=!e[e.sex].loading),s.status){case-1:alert("不好意思，服务器开小差了，请重新刷新页面");break;case 0:e[o.sex].BookList=e[o.sex].BookList.concat(t),"female"==o.sex?sessionStorage.setItem("female",JSON.stringify({BookList:e[o.sex].BookList})):sessionStorage.setItem("male",JSON.stringify({BookList:e[o.sex].BookList})),e[e.sex].loading=!1,s.result.currentPage>=s.result.totalPage?e[o.sex].haveNextPage=!1:e[o.sex].haveNextPage=!0}}))},scrollBottom:function(){var e=this;this[this.sex].haveNextPage&&this[this.sex].haveNextPage&&(o.sex=this.sex,o.page=++this[o.sex].page,s.getHotBooks(o).then(function(s){var t=s.result.list;switch(s.status){case-1:alert("不好意思，服务器开小差了，请重新刷新页面");break;case 0:e[o.sex].BookList=e[o.sex].BookList.concat(t),"female"==o.sex?sessionStorage.setItem("female",JSON.stringify({BookList:e[o.sex].BookList})):sessionStorage.setItem("male",JSON.stringify({BookList:e[o.sex].BookList})),s.result.currentPage>=s.result.totalPage?e[o.sex].haveNextPage=!1:e[o.sex].haveNextPage=!0}}))}},init:function(){},attached:function(){},methods:{changeStatus:function(){"male"==this.sex&&0!=this.male.BookList.length||"female"==this.sex&&0!=this.female.BookList.length||(0!=this[this.sex].BookList.length&&(this.loading=!this.loading),this.$emit("getChangeSexBooks"))},directTo:function(e){var s=this;history.pushState({sex:e,scrollY:window.scrollY,page:s[e].page,noMore:s[e].noMore,haveNextPage:s[e].haveNextPage},"")}}})}});
//# sourceMappingURL=../../maps/wxV2/controller/bookHot.js.map
