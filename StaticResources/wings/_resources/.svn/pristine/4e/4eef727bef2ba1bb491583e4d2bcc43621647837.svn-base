define(["vue","service/bookShelfAddService","mixin/loadingMoreMixin","plugins/jquery.cookie"],function(o,e,i){return function(t,a,s,r){new o({el:"#app",mixins:[i],data:{isRecordAjaxLoaded:!1,ajaxRecordBookItems:[],isShelfAjaxLoaded:!1,ajaxShelfBookItems:[],actionType:"followItems",actionRecord:0,hasReadRecordItem:t,hasBookShelfItem:a,isRecordLoading:!1,recordFlag:!1,isShelfLoading:!1,shelfFlag:!1,noRecordLoading:!1,noShelfLoading:!1,hasRecordNoMore:!1,hasShelfNoMore:!1},events:{scrollBottom:function(){var o=this;if("readRecord"==this.actionType){if(!r)return void(this.hasRecordNoMore=!0);if(this.noRecordLoading)return void(this.hasRecordNoMore=!0);if(this.isRecordLoading=!0,this.recordFlag)return;o.recordFlag=!0,e.getMoreRecordBook(++o.recordPageNum).then(function(e){e.result.recentlyBooks.haveNextPage||(o.noRecordLoading=!0),1==e.status?location.href=e.url:0==e.status&&(o.isRecordAjaxLoaded=!0,o.isRecordLoading=!1,o.recordFlag=!1,o.ajaxRecordBookItems=o.ajaxRecordBookItems.concat(e.result.recentlyBooks.items))})}else if("followItems"==this.actionType){if(this.noShelfLoading)return void(this.hasShelfNoMore=!0);if(this.isShelfLoading=!0,this.shelfFlag)return;this.shelfFlag=!0,e.getMoreShelfBook(++o.shelfPageNum).then(function(e){e.result.followBooks.haveNextPage||(o.noShelfLoading=!0),1==e.status?location.href=e.url:0==e.status&&(o.isShelfAjaxLoaded=!0,o.isShelfLoading=!1,o.shelfFlag=!1,o.ajaxShelfBookItems=o.ajaxShelfBookItems.concat(e.result.followBooks.items))})}}},init:function(){this.recordPageNum=1,this.shelfPageNum=1},attached:function(){var o=$.cookie("actionType");o&&(this.actionType=o),1==s&&(this.actionType="readRecord",document.title="来看阅读")},methods:{changeTab:function(o,e){this.actionType=o,this.actionRecord=e,$.cookie("actionType",o),location.href="/wx/i/wxshelf?record="+e}}})}});
//# sourceMappingURL=../../maps/wxV2/controller/bookShelfAdd.js.map
