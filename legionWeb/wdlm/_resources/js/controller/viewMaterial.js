"use strict";define(["vue","mixin/sidebar","../../components/clipboard.min","../../components/html2canvas","../../components/blueimp-canvas-to-blob/js/canvas-to-blob.min","../../components/file-saver/FileSaver.min"],function(e,n,t){return function(a){return new e({el:"#app",mixins:[n],data:{channelList:a,channelGenerateList:""},mounted:function(){$(".group-collapse").on("show.bs.collapse",function(){var e=$(this);e.closest("li").find(".glyphicon").removeClass("glyphicon-plus").addClass("glyphicon-minus")}).on("hide.bs.collapse",function(){var e=$(this);e.closest("li").find(".glyphicon").removeClass("glyphicon-minus").addClass("glyphicon-plus")})},methods:{toImage:function(){function e(e,n,t){var a,i=new Image;i.src=e,i.crossOrigin="anonymous",i.onload=function(){var e=document.createElement("canvas"),i=e.getContext("2d");e.height=this.height,e.width=this.width,i.drawImage(this,0,0),a=e.toDataURL(t||"image/jpeg"),n(a),e=null}}var n=$(".textWrapper"),t=n.html();t=t.replace(/&lt;/g,"<"),t=t.replace(/&gt;/g,">"),t=t.replace(/&nbsp;/g,"");var a=n.find("img");a&&$.each(a,function(n,t){e($(t).attr("src")+"@.jpg",function(e){$(t).attr("src",e)})}),setTimeout(function(){var e=$(".textWrapper").width(),n=$(".textWrapper").height(),t=$("#generateImg"),a=document.createElement("canvas");a.width=2*e,a.height=2*n;var i=a.getContext("2d");i.fillStyle="white",i.scale(.5,.5),html2canvas(document.querySelector(".textWrapper"),{canvas:a,onrendered:function(e){var n=e.toDataURL("image/png");t.find(".modal-body").html("").append('<img src="'+n+'" />'),t.modal("show"),e.toBlob&&e.toBlob(function(e){saveAs(e,"image.png")},"image/png")}})},10)},createLink:function(){var e=$(".select-channel").find('input[name="channelids"]'),n=[];return $.each(e,function(e,t){t.checked&&n.push(t)}),n.length?void $.ajax({type:"POST",url:"/weidulm/channel/addOrder",data:$("#linkChannel").serialize(),async:!1,error:function(e){alert("Connection error")},success:function(e){var n='<table class="table table-striped table-bordered material-table"><tbody>';$.each(e,function(e,t){for(var a in t)n+='<tr><th class="tit">'+a+"</th><td>"+t[a]+'</td><td><a href="javascript:;" class="copyLink" data-clipboard-action="copy" data-clipboard-text="'+t[a]+'">复制</a></td></tr>'}),n+="</tbody></table>",$(".createLinkText").html("").append(n);new t(".copyLink")}}):void alert("请先选择渠道")},clipText:function(){var e=new t(".btn-clip");e.on("success",function(e){}),e.on("error",function(e){alert("报错了")})},change:function(e){if(e.parentId){var n=this.channelList.find(function(n){return n.id==e.parentId});n.checked=n.children.filter(function(e){return e.checked}).length==n.children.length}else{var t=e;t.children.forEach(function(e){e.checked=t.checked})}}}})}});
//# sourceMappingURL=../maps/controller/viewMaterial.js.map
